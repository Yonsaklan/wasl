{% extends 'base.html' %}
{% load static %}

{% block title %}
deals
{% endblock %}

{% block content %}
<div class="page-heading">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1 style="color: aliceblue; font-size: 60px;">استثمر في المشروع المناسب</h1>
                <h2>امتلك أي مشروع أو اشتري أسهم فيه</h2>
                <div class="border-button">
                    <a href="about.html"><h1>تواصل معنا</h1></a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="section-heading text-center">
    <h2>
        <p1 style="color:darkblue; width: 20px; height: 100px;"></p1><br><br>
    </h2>
</div>
<!--من هنا-->
<div class="amazing-deals">
  <div class="container">
      <div class="row">
          {% for project in projects %}
          <div class="col-lg-6 project-item mb-4" data-category="{% if project.category %}{{ project.category.category }}{% else %}none{% endif %}">
              <div class="card h-100">
                  <div class="row no-gutters">
                      <div class="col-md-6">
                          <div class="project-image">
                              {% if project.image %}
                              <img src="{{ project.image.url }}" class="card-img" alt="{{ project.title }}">
                              {% else %}
                              <div class="image-placeholder d-flex justify-content-center align-items-center" style="background-color: #881782; height: 100%;">
                                  <span class="text-white">No Image</span>
                              </div>
                              {% endif %}
                          </div>
                      </div>
                      <div class="col-md-6 d-flex flex-column">
                          <div class="card-body d-flex flex-column">
                              <h5 class="card-title">{{ project.title }}</h5>
                              <h6 class="card-subtitle mb-2 text-muted">التقييم: {{ project.average_rating }} ★</h6>
                              <p class="card-text">التكلفة المقدرة: {{ project.cost }}</p>
                              <div class="project-details mb-2">
                                  <p class="mb-1"><strong>تصنيف المشروع:</strong> {{ project.category }}</p>
                                  <p class="mb-1"><strong>موقع المشروع:</strong> {{ project.address }}</p>
                              </div>
                              <p class="card-text"><strong>وصف المشروع:</strong> {{ project.discripe|safe }}</p>
                              <div class="mt-auto">
                                  <a href="{% url 'invreq' project.id %}" class="btn btn-primary">الاستثمار في المشروع</a>
                                  <a href="{% url 'project_detail' project.id %}" class="btn btn-primary">  تعليقات حول المشروع</a>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="card-footer text-muted">
                      <h6>تقييم المستخدمين</h6>
                      <ul class="list-unstyled">
                          <li>متوسط التقييم: {{ project.average_rating }} ★</li>
                          {% for rating in project.project_ratings.all %}
                          <li>
                              <div class="rating-info">
                                  <p>التقييم: {{ rating.rating }} ★</p>
                                  <p>بواسطة: {{ rating.user.username }}</p>
                                  {% if rating.comment %}
                                  <p>التعليق: {{ rating.comment }}</p>
                                  {% endif %}
                              </div>
                          </li>
                          {% endfor %}
                      </ul>
                  </div>
              </div>
          </div>
          {% endfor %}
      </div>
  </div>
</div>


<div class="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h2>هل تبحث عن مشاريع للاستثمار فيها وربح المال من خلال المساهمة في المشاريع؟</h2>
                <h1>قم بالإعلان عن مشروعك لإيجاد المستثمرين</h1>
            </div>
            <div class="col-lg-4">
                <div class="border-button">
                    <a href="{% url 'index' %}">أسعار الباقات</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>


.rating-section {
    margin-top: 20px;
}

.rating-section h4 {
    color: #333;
    font-size: 18px;
    margin-bottom: 10px;
}

.ratings-list {
    list-style: none;
    padding: 0;
}

.rating-info {
    border-bottom: 1px solid #ccc;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

.rating-info p {
    margin: 0;
}

.comment {
    background-color: #f9f9f9;
    border-radius: 5px;
    padding: 10px;
    margin-top: 10px;
}

.comment p {
    margin: 0;
    font-style: italic;
}

.rating-info:nth-child(odd) {
    background-color: #f0f0f0;
}

.rating-info:nth-child(even) {
    background-color: #e5e5e5;
}


.comment:nth-child(odd) {
    background-color: #d9edf7;
}

.comment:nth-child(even) {
    background-color: #dff0d8;
}

</style>
<!--الى هنا-->
{% endblock %}
